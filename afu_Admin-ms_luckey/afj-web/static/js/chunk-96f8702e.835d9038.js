(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96f8702e"],{3467:function(t,e,r){"use strict";var n=r("a6df"),a=r.n(n);a.a},"3b5b":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"header"},[r("div",{staticClass:"clearfix headLab"},[r("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.isDtl?"商户详情":"修改商户信息"))]),t._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"14px"},attrs:{type:"text"},on:{click:t.onBack}},[t._v("返回")])],1)]),t._v(" "),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",staticStyle:{width:"calc(100% - 600px)","margin-left":"240px"},attrs:{rules:t.rules,model:t.form,"label-position":"right","label-width":"120px"}},[r("el-form-item",{attrs:{label:"商户编号",prop:"merchantNumber"}},[r("el-input",{attrs:{disabled:t.isDtl,maxlength:16},model:{value:t.form.merchantNumber,callback:function(e){t.$set(t.form,"merchantNumber",e)},expression:"form.merchantNumber"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"店铺名称",prop:"shopName"}},[r("el-input",{attrs:{disabled:t.isDtl,maxlength:16},model:{value:t.form.shopName,callback:function(e){t.$set(t.form,"shopName",e)},expression:"form.shopName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"主营业务",prop:"mainBusiness"}},[r("el-input",{attrs:{disabled:t.isDtl,maxlength:16},model:{value:t.form.mainBusiness,callback:function(e){t.$set(t.form,"mainBusiness",e)},expression:"form.mainBusiness"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{staticClass:"avatar-uploader hide",attrs:{action:"#",limit:1,"file-list":t.businessLicense,"list-type":"picture-card","auto-upload":!1},scopedSlots:t._u([{key:"file",fn:function(e){var n=e.file;return r("div",{},[r("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:n.url,alt:""}}),t._v(" "),r("span",{staticClass:"el-upload-list__item-actions"},[r("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(n)}}},[r("i",{staticClass:"el-icon-zoom-in"})])])])}}])},[r("i",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{slot:"default"},slot:"default"})]),t._v(" "),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),r("el-form-item",{attrs:{label:"有效期至",prop:"expiryDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期时间",disabled:t.isDtl,"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptions},model:{value:t.form.expiryDate,callback:function(e){t.$set(t.form,"expiryDate",e)},expression:"form.expiryDate"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"店主姓名",prop:"merchantName"}},[r("el-input",{attrs:{disabled:t.isDtl,maxlength:16},model:{value:t.form.merchantName,callback:function(e){t.$set(t.form,"merchantName",e)},expression:"form.merchantName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"店铺地址",prop:"address"}},[r("el-input",{attrs:{disabled:t.isDtl},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[r("el-input",{attrs:{disabled:t.isDtl,maxlength:16},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"微信号",prop:"wechat"}},[r("el-input",{attrs:{disabled:t.isDtl,maxlength:16},model:{value:t.form.wechat,callback:function(e){t.$set(t.form,"wechat",e)},expression:"form.wechat"}})],1),t._v(" "),t.isDtl?r("el-form-item",{attrs:{label:"创建时间"}},[r("div",{staticStyle:{color:"#C0C4CC","margin-left":"15px"}},[t._v(t._s(t.createAt))])]):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"客户经理"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDtl,placeholder:"客户经理"},model:{value:t.form.accountManagerUuid,callback:function(e){t.$set(t.form,"accountManagerUuid",e)},expression:"form.accountManagerUuid"}},t._l(t.cusManagerList,(function(t){return r("el-option",{key:t.customerServiceUuid,attrs:{label:t.name,value:t.customerServiceUuid}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"会员"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isDtl,placeholder:"会员"},model:{value:t.form.memberUuid,callback:function(e){t.$set(t.form,"memberUuid",e)},expression:"form.memberUuid"}},t._l(t.memberList,(function(t){return r("el-option",{key:t.memberUuid,attrs:{label:t.lever,value:t.memberUuid}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"品牌",prop:"brandList"}},[r("el-checkbox-group",{model:{value:t.brandListCheckOptions,callback:function(e){t.brandListCheckOptions=e},expression:"brandListCheckOptions"}},t._l(t.brandList,(function(e){return r("el-checkbox",{key:e.brandUuid,attrs:{label:e.brandUuid,disabled:t.isDtl}},[t._v(t._s(e.brandName))])})),1)],1),t._v(" "),r("el-form-item",{attrs:{align:"center","wx:if":"!isDtl"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",loading:t.isLoaded},on:{click:t.onSubmit}},[t._v("确定")]),t._v(" "),r("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)},a=[],i=r("db72"),s=(r("96cf"),r("3b8d")),o=(r("ac6a"),r("617c")),c=(r("e799"),r("ed08"),{name:"EditMerchantManage",data:function(){return{loading:!1,isLoaded:!1,isSure:!0,isDtl:!1,merchantUuid:"",switchVal:!0,businessLicense:[],brandListCheckOptions:[],dialogImageUrl:"",dialogVisible:!1,brandList:[],cusManagerList:[],memberList:[],form:{},createAt:"",rules:{expiryDate:[{required:!0,message:"必填项",trigger:"change"}],merchantNumber:[{required:!0,message:"必填项",trigger:"blur"}],brandList:[{required:!0,type:"array",message:"必填项",trigger:"blur"}],shopName:[{required:!0,message:"必填项",trigger:"blur"}],merchantName:[{required:!0,message:"必填项",trigger:"blur"}],address:[{required:!0,message:"必填项",trigger:"blur"}],phone:[{required:!0,message:"必填项",trigger:"blur"}],accountManagerUuid:[{required:!0,message:"必填项",trigger:"blur"}]},pickerOptions:{shortcuts:[{text:"5天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+432e6),t.$emit("pick",e)}},{text:"10天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e6),t.$emit("pick",e)}},{text:"30天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+2592e6),t.$emit("pick",e)}},{text:"长期",onClick:function(t){var e=new Date;e.setTime(e.getTime()+31536e8),t.$emit("pick",e)}}]}}},created:function(){this.getBrandList(),this.getMemberList(),this.getCusmanagerList()},mounted:function(){this.merchantUuid=this.$route.query.merchantUuid,this.form.merchantUuid=this.merchantUuid,this.beforeRouter=this.$route.query.beforeRouter,this.isDtl=!!this.$route.query.isDtl&&JSON.parse(this.$route.query.isDtl),document.title=this.isDtl?"商户详情":"修改商户信息",this.$route.meta.title=this.isDtl?"商户详情":"修改商户信息",this.getDtl()},methods:{onSubmit:function(){var t=this,e=this.brandListCheckOptions;if(e&&e.length>0){var r=[];e.forEach((function(t,e){var n={};n.brandUuid=t,r.push(n)})),this.form.brandList=r}this.$refs.dataForm.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return t.isLoaded=!0,t.form.businessLicense&&(t.form.businessLicense=JSON.stringify(t.form.businessLicense)),t.form.brandList=JSON.stringify(t.form.brandList),e.next=6,Object(o["u"])(Object(i["a"])({},t.form));case 6:n=e.sent,1==n.rtn?(t.$message.success("修改成功"),t.onBack()):t.getDtl(),t.isLoaded=!1;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){this.$router.push({name:"MerchantListManage"})},getDtl:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,r,n,a,i,s,c,u,l,d,m,f,h,p,b,g,v,x,y,k;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(o["t"])({merchantUuid:this.merchantUuid});case 3:e=t.sent,1==e.rtn&&(r=e.result,n=r.merchantNumber,a=r.merchantUuid,i=r.shopName,s=r.businessLicense,c=r.mainBusiness,u=r.address,l=r.merchantName,d=r.phone,m=r.wechat,f=r.dataStatus,h=r.brandList,p=r.accountManagerUuid,b=r.memberUuid,g=r.expiryDate,v=r.createAt,x=[],h.forEach((function(t,e){x.push(t.brandUuid)})),this.brandListCheckOptions=x,this.createAt=v,y=[],k=s?JSON.parse(s):[],console.log(this.businessLicense,"bus"),k.forEach((function(t,e){var r={};r.name="name_"+e,r.url=t,y.push(r)})),this.businessLicense=y,console.log(h,x,"========"),this.form={merchantNumber:n,merchantUuid:a,shopName:i,businessLicense:s?k:"",mainBusiness:c,address:u,merchantName:l,phone:d,wechat:m,dataStatus:f,accountManagerUuid:p,memberUuid:b,expiryDate:g},console.log(this.form.brandList,"============"),this.loading=!1);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBrandList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])({});case 2:e=t.sent,1==e.rtn&&(this.brandList=e.brandList,console.log(this.brandList,"======="));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getMemberList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["s"])({});case 2:e=t.sent,1==e.rtn&&(this.memberList=e.memberList);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getCusmanagerList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["o"])({});case 2:e=t.sent,1==e.rtn&&(this.cusManagerList=e.cusManageList);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onBack:function(){this.$router.back(-1)},handleRemove:function(t){console.log(t),this.businessLicense.splice(t,1)},handlePictureCardPreview:function(t){console.log(t,"========"),this.dialogImageUrl=t.url,this.dialogVisible=!0},handleDownload:function(t){console.log(t)}}}),u=c,l=(r("bad2"),r("3467"),r("2877")),d=Object(l["a"])(u,n,a,!1,null,"9b341d4a",null);e["default"]=d.exports},"617c":function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"w",(function(){return s})),r.d(e,"t",(function(){return o})),r.d(e,"u",(function(){return c})),r.d(e,"v",(function(){return u})),r.d(e,"r",(function(){return l})),r.d(e,"x",(function(){return d})),r.d(e,"a",(function(){return m})),r.d(e,"y",(function(){return f})),r.d(e,"z",(function(){return h})),r.d(e,"d",(function(){return p})),r.d(e,"s",(function(){return b})),r.d(e,"o",(function(){return g})),r.d(e,"i",(function(){return v})),r.d(e,"f",(function(){return x})),r.d(e,"k",(function(){return y})),r.d(e,"j",(function(){return k})),r.d(e,"e",(function(){return O})),r.d(e,"m",(function(){return L})),r.d(e,"n",(function(){return w})),r.d(e,"l",(function(){return _})),r.d(e,"g",(function(){return j})),r.d(e,"h",(function(){return D})),r.d(e,"q",(function(){return U})),r.d(e,"p",(function(){return C}));var n=r("ab3e");function a(t){return Object(n["a"])({url:"/merchant/apply/list",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/merchant/apply/audit",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/merchant/list",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/merchant/detail",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/merchant/modify",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/merchant/modify/status",method:"post",data:t})}function l(t){return Object(n["a"])({method:"post",url:"/merchant/modify/member",data:t})}function d(t){return Object(n["a"])({method:"post",url:"merchant/modify/expiry",data:t})}function m(t){return Object(n["a"])({method:"post",url:"merchant/user/add",data:t})}function f(t){return Object(n["a"])({url:"merchant/user/remove",method:"post",data:t})}function h(t){return Object(n["a"])({method:"post",url:"merchant/user/modify",data:t})}function p(t){return Object(n["a"])({method:"post",url:"brand/selection/list",data:t})}function b(t){return Object(n["a"])({method:"post",url:"member/selection/list",data:t})}function g(t){return Object(n["a"])({method:"post",url:"cusmanager/selection/list",data:t})}function v(t){return Object(n["a"])({method:"post",url:"merchant/credit/apply/list",data:t})}function x(t){return Object(n["a"])({method:"post",url:"merchant/credit/apply/audit",data:t})}function y(t){return Object(n["a"])({url:"/order/credit/list",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/order/credit/detail",method:"post",data:t})}function O(t){return Object(n["a"])({url:"/order/credit/contract/"+t,method:"get",data:{}})}function L(t){return Object(n["a"])({url:"/order/credit/audit",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/order/modify/creditOrder",method:"post",data:t})}function _(t){return Object(n["a"])({url:"merchant/credit/merchant/list",method:"post",data:t})}function j(t){return Object(n["a"])({url:"/merchant/credit/detail",method:"post",data:t})}function D(t){return Object(n["a"])({url:"/merchant/credit/modify",method:"post",data:t})}function U(t){return Object(n["a"])({url:"/merchant/modify/brand",method:"post",data:t})}function C(t){return Object(n["a"])({method:"post",header:{"Content-Type":"application/xls"},responseType:"blob",url:"/order/credit/export",data:t})}},a6df:function(t,e,r){},bad2:function(t,e,r){"use strict";var n=r("c67d"),a=r.n(n);a.a},c67d:function(t,e,r){},e799:function(t,e,r){"use strict";r("6762"),r("2fdb"),r("4360")}}]);