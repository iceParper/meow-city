(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3eab365f"],{"0c43":function(t,e,i){"use strict";var r=i("92bf"),a=i.n(r);a.a},"214c":function(t,e,i){"use strict";i.d(e,"g",(function(){return a})),i.d(e,"f",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"b",(function(){return n})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return u})),i.d(e,"a",(function(){return c}));var r=i("ab3e");function a(t){return Object(r["a"])({url:"product/selection/list",method:"post",data:t})}function s(t){return Object(r["a"])({url:"product/list",method:"post",data:t})}function o(t){return Object(r["a"])({url:"product/detail",method:"post",data:t})}function n(t){return Object(r["a"])({url:"product/add",method:"post",data:t})}function l(t){return Object(r["a"])({url:"product/modify",method:"post",data:t})}function u(t){return Object(r["a"])({url:"product/modify/status",method:"post",data:t})}function c(t){return Object(r["a"])({url:"product/remove",method:"post",data:t})}},"24d7":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"header"},[i("div",{staticClass:"clearfix headLab"},[i("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.title))]),t._v(" "),i("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"14px"},attrs:{type:"text"},on:{click:t.onBack}},[t._v("返回")])],1)]),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fullscreenLoading,expression:"fullscreenLoading"}]},[i("el-form",{ref:"dataForm",staticStyle:{width:"calc(100% - 480px)","margin-left":"240px"},attrs:{rules:t.rules,model:t.form,"label-position":"right","label-width":"120px"}},[i("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[i("el-input",{attrs:{maxlength:32},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"货号",prop:"itemNumber"}},[i("el-input",{attrs:{maxlength:32},model:{value:t.form.itemNumber,callback:function(e){t.$set(t.form,"itemNumber",e)},expression:"form.itemNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"品牌归属",prop:"brandUuid"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"所属品牌"},on:{change:t.handleBrandChange},model:{value:t.form.brandUuid,callback:function(e){t.$set(t.form,"brandUuid",e)},expression:"form.brandUuid"}},t._l(t.brandSelList,(function(t){return i("el-option",{key:t.brandUuid,attrs:{label:t.brandName,value:t.brandUuid}})})),1)],1),t._v(" "),t.form.brandUuid&&t.brandChildSelList.length>0?i("el-form-item",{attrs:{label:"所属二级品牌",prop:"brandChildList",loading:t.brandChildLoading}},[i("el-checkbox-group",{model:{value:t.form.brandChildList,callback:function(e){t.$set(t.form,"brandChildList",e)},expression:"form.brandChildList"}},t._l(t.brandChildSelList,(function(e){return i("el-checkbox",{key:e.brandChildUuid,attrs:{label:e.brandChildUuid}},[t._v(t._s(e.brandChildName))])})),1)],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"分类归属",prop:"classifyUuid"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"所属分类"},on:{change:t.handleClassifyChange},model:{value:t.form.classifyUuid,callback:function(e){t.$set(t.form,"classifyUuid",e)},expression:"form.classifyUuid"}},t._l(t.classifySelList,(function(t){return i("el-option",{key:t.classifyUuid,attrs:{label:t.classifyName,value:t.classifyUuid}})})),1)],1),t._v(" "),t.form.classifyUuid&&t.classifyChildSelList.length>0?i("el-form-item",{attrs:{label:"所属二级分类",prop:"classifyChildList",loading:t.classifyChildLoading}},[i("el-checkbox-group",{model:{value:t.form.classifyChildList,callback:function(e){t.$set(t.form,"classifyChildList",e)},expression:"form.classifyChildList"}},t._l(t.classifyChildSelList,(function(e){return i("el-checkbox",{key:e.classifyChildUuid,attrs:{label:e.classifyChildUuid}},[t._v(t._s(e.classifyChildName))])})),1)],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"价格类型",prop:"priceType"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"价格类型"},model:{value:t.form.priceType,callback:function(e){t.$set(t.form,"priceType",e)},expression:"form.priceType"}},t._l(t.dataOptions,(function(t){return i("el-option",{key:t.id,attrs:{label:t.lab,value:t.val}})})),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"销售类型",prop:"saleType"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"销售类型"},model:{value:t.form.saleType,callback:function(e){t.$set(t.form,"saleType",e)},expression:"form.saleType"}},t._l(t.dataOptions1,(function(t){return i("el-option",{key:t.id,attrs:{label:t.lab,value:t.val}})})),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"售价",prop:"salePrice"}},[i("el-input",{staticClass:"addPriceStyle",attrs:{maxlength:16},model:{value:t.form.salePrice,callback:function(e){t.$set(t.form,"salePrice",e)},expression:"form.salePrice"}},[i("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"吊牌价",prop:"suggestPrice"}},[i("el-input",{staticClass:"addPriceStyle",attrs:{maxlength:16},model:{value:t.form.suggestPrice,callback:function(e){t.$set(t.form,"suggestPrice",e)},expression:"form.suggestPrice"}},[i("template",{slot:"append"},[t._v("元")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"每双重量",prop:"weight"}},[i("el-input",{attrs:{maxlength:16},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}},[i("template",{slot:"append"},[t._v("千克")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"SKU管理",prop:"colorList"}},[t._l(t.form.colorList,(function(e,r){return[i("div",{key:r,staticClass:"sku-block"},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block",height:"122px","vertical-align":"bottom"},attrs:{"auto-upload":"","show-file-list":!1,headers:t.headers,action:t.uploadUrl,data:t.fileData,"on-success":function(e,i){return t.handleSkuImageSuccess(e,i,r)},"before-remove":t.beforeSkuRemove,"before-upload":t.beforeSkuImageUpload}},[e.picture.length?i("img",{staticClass:"avatar",attrs:{src:e.picture}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),i("el-input",{staticClass:"sku-block-formEle",staticStyle:{width:"200px",margin:"10px 0"},attrs:{placeholder:"颜色",maxlength:16},model:{value:e.color,callback:function(i){t.$set(e,"color",i)},expression:"sku.color"}}),t._v(" "),i("el-button",{staticClass:"sku-block-formEle",attrs:{type:"primary",title:"删除"},on:{click:function(e){return t.addProductSku(r)}}},[t._v("新增尺码")]),t._v(" "),i("el-button",{staticClass:"sku-block-formEle",staticStyle:{margin:"0"},attrs:{type:"info",plain:"",title:"删除"},on:{click:function(e){return t.deleteSku(r)}}},[t._v("删除颜色")]),t._v(" "),t._l(e.skuList,(function(e,a){return i("div",{key:a,staticClass:"sku-block-inputs"},[i("el-input",{staticClass:"sku-block-formEle",staticStyle:{width:"200px"},attrs:{placeholder:"尺码",maxlength:16},model:{value:e.skuName,callback:function(i){t.$set(e,"skuName",i)},expression:"productSku.skuName"}}),t._v(" "),i("el-input",{staticClass:"sku-block-formEle",staticStyle:{width:"200px"},attrs:{placeholder:"副标题",maxlength:16},model:{value:e.subTitle,callback:function(i){t.$set(e,"subTitle",i)},expression:"productSku.subTitle"}}),t._v(" "),i("el-input",{staticClass:"sku-block-formEle addPriceStyle",staticStyle:{width:"200px"},attrs:{placeholder:"售价",maxlength:16},model:{value:e.salePrice,callback:function(i){t.$set(e,"salePrice",i)},expression:"productSku.salePrice"}},[i("template",{slot:"append"},[t._v("售价(元)")])],2),t._v(" "),i("el-input",{staticClass:"sku-block-formEle",staticStyle:{width:"200px"},attrs:{placeholder:"库存",maxlength:16},model:{value:e.stock,callback:function(i){t.$set(e,"stock",i)},expression:"productSku.stock"}},[i("template",{slot:"append"},[t._v("库存(双)")])],2),t._v(" "),i("el-input",{staticClass:"sku-block-formEle",staticStyle:{width:"200px"},attrs:{placeholder:"系统识别码",maxlength:24,disabled:t.canEdit&&e.isSysCode},model:{value:e.systemCode,callback:function(i){t.$set(e,"systemCode",i)},expression:"productSku.systemCode"}}),t._v(" "),i("el-input",{staticClass:"sku-block-formEle",staticStyle:{width:"200px"},attrs:{placeholder:"一手",maxlength:16,disabled:!0},model:{value:e.productNumber,callback:function(i){t.$set(e,"productNumber",i)},expression:"productSku.productNumber"}},[i("template",{slot:"append"},[t._v("SKU数量(双)")])],2),t._v(" "),i("el-button",{staticClass:"sku-block-formEle",attrs:{type:"info",plain:"",icon:"el-icon-delete",title:"删除"},on:{click:function(e){return t.deleteProductSku(r,a)}}})],1)}))],2)]})),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addSku}},[t._v("新增颜色")])],2),t._v(" "),i("el-form-item",{attrs:{label:"主图",prop:"masterGraphList"}},[i("el-upload",{attrs:{multiple:"","auto-upload":"",headers:t.headers,action:t.uploadUrl,data:t.fileData,"list-type":"picture-card","file-list":t.form.masterGraphList,"before-remove":t.beforePictureRemove,"on-success":t.pictrueUploadSuccess,"on-remove":t.handlePictureRemove,"on-preview":t.handlePictureCardPreview,id:"crTable"}},[i("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),i("el-form-item",{attrs:{label:"视频",prop:"video"}},[i("el-upload",{staticClass:"upload-demo",attrs:{"auto-upload":"",headers:t.headers,data:t.fileData,action:t.uploadUrl,limit:1,"file-list":t.videoFileList,"before-upload":t.beforeUploadVideo,"before-remove":t.beforeVedioImgRemove,"on-remove":t.handleVideoRemove,"on-success":t.videoUploadSuccess}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请上传视频文件，且只能上传一个文件")])],1)],1),t._v(" "),t.form.video?i("el-form-item",{attrs:{label:"视频图片",prop:"vedioImg"}},[i("el-upload",{staticClass:"avatar-uploader",class:{hide:t.hideUpload},attrs:{"auto-upload":"",action:t.uploadUrl,limit:t.limitCount,"list-type":"picture-card","file-list":t.form.vedioImg,headers:t.headers,data:t.fileData,"on-success":t.picUploadSuccess,"on-preview":t.handlePictureCardPreview,"before-remove":t.beforeDetailRemove,"on-remove":t.handleVedioImgRemove,"on-change":t.vedioImgChange}},[i("i",{staticClass:"el-icon-plus"})])],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"详细图片",prop:"detailPictureList"}},[i("el-upload",{attrs:{"auto-upload":"",headers:t.headers,action:t.uploadUrl,data:t.fileData,"list-type":"picture-card","file-list":t.form.detailPictureList,"before-remove":t.beforeDetailRemove,"on-success":t.detailUploadSuccess,"on-remove":t.handleDetailRemove,"on-preview":t.handlePictureCardPreview,id:"crTable_1"}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),t._v(" "),i("el-form-item",{attrs:{label:"是否上架",prop:"productStatus"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.productStatus,callback:function(e){t.$set(t.form,"productStatus",e)},expression:"form.productStatus"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:t.isLoaded},on:{click:t.onSubmit}},[t._v("确定")]),t._v(" "),i("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},a=[],s=(i("7f7f"),i("db72")),o=(i("5df3"),i("ac6a"),i("96cf"),i("3b8d")),n=i("bd86"),l=i("91b6"),u=i("53fe"),c=i.n(u),d=i("214c"),f=i("c707"),m=i("ed8e"),h=i("5f87"),p=(i("9add"),{name:"ProductAddManage",data:function(){var t;return t={isSubmitFlag:!1,hideUpload:!1,limitCount:1,dialogVisible:!1,headers:{},type:"",title:"",isNotAllow:!1,isNotSame:!1,isLoaded:!1,fullscreenLoading:!1,brandChildLoading:!1,classifyChildLoading:!1},Object(n["a"])(t,"dialogVisible",!1),Object(n["a"])(t,"productUuid",""),Object(n["a"])(t,"uploadUrl",l["a"]),Object(n["a"])(t,"fileData",{fileType:1}),Object(n["a"])(t,"videoFileList",[]),Object(n["a"])(t,"dataOptions",[{id:1,lab:"正价",val:1},{id:2,lab:"特价",val:2}]),Object(n["a"])(t,"dataOptions1",[{id:1,lab:"现货",val:1},{id:2,lab:"预售",val:2}]),Object(n["a"])(t,"dialogImageUrl",""),Object(n["a"])(t,"form",{name:"",itemNumber:"",productStatus:1,suggestPrice:0,salePrice:0,weight:0,classifyUuid:"",brandUuid:"",priceType:"",saleType:"",brandChildList:[],classifyChildList:[],masterGraphList:[],video:"",vedioImg:[],detailPictureList:[],colorList:[{color:"",picture:"",skuList:[]}]}),Object(n["a"])(t,"brandSelList",[]),Object(n["a"])(t,"brandChildSelList",[]),Object(n["a"])(t,"classifySelList",[]),Object(n["a"])(t,"classifyChildSelList",[]),Object(n["a"])(t,"sizeOptions",[]),Object(n["a"])(t,"rules",{name:[{required:!0,message:"必填项",trigger:"blur"}],itemNumber:[{required:!0,message:"必填项",trigger:"blur"}],productStatus:[{required:!0,message:"必填项",trigger:"blur"}],weight:[{required:!0,message:"必填项",trigger:"blur"}],suggestPrice:[{required:!0,message:"必填项",trigger:"blur"}],salePrice:[{required:!0,message:"必填项",trigger:"blur"}],classifyUuid:[{required:!0,message:"必填项",trigger:"blur"}],brandUuid:[{required:!0,message:"必填项",trigger:"blur"}],brandChildList:[{type:"array",required:!0,message:"必填项",trigger:"blur"}],classifyChildList:[{type:"array",required:!0,message:"必填项",trigger:"blur"}],saleType:[{required:!0,message:"必填项",trigger:"blur"}],priceType:[{required:!0,message:"必填项",trigger:"blur"}],masterGraphList:[{type:"array",required:!0,message:"必填项",trigger:"blur"}],video:[],vedioImg:[{type:"array",required:!0,message:"必填项",trigger:"blur"}],detailPictureList:[{type:"array",required:!0,message:"必填项",trigger:"blur"}],colorList:[{type:"array",required:!0,message:"必填项",trigger:"blur"}]}),t},created:function(){this.productUuid=this.$route.query.productUuid,this.beforeRouter=this.$route.query.beforeRouter,this.canEdit=this.$route.query.canEdit,console.log(this.canEdit,"canEdit"),this.token=Object(h["a"])(),this.userId=Object(h["b"])(),this.headers={_t:this.token,_u:this.userId},console.log(this.token,this.userId,this.headers),this.canEdit?(console.log("canEdit"),this.type="update",this.title="修改商品",document.title="修改商品",this.$route.meta.title="修改商品"):(this.type="add",this.title="新增商品",document.title="新增商品",this.$route.meta.title="新增商品"),this.getBrandSelList(),this.getClassifySelList(),this.canEdit&&this.getDetail()},mounted:function(){this.rowDrop(),this.rowDrop_1()},methods:{getDetail:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,r,a,s,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.fullscreenLoading=!0,t.next=3,Object(d["c"])({productUuid:this.productUuid});case 3:if(e=t.sent,1!=e.rtn){t.next=19;break}for(i in e.result.colorList.forEach((function(t,e){t.skuList.forEach((function(t,e){t.isSysCode=!0}))})),this.form)"brandChildList"!=i&&"classifyChildList"!=i&&"vedioImg"!=i&&("skuList"!==i?(this.form[i]=e.result[i],console.log(this.form[i],"0")):this.form[i]=e.result.colorList);return e.result.vedioImg&&this.form.vedioImg&&this.form.vedioImg.push(e.result.vedioImg),this.form.vedioImg&&this.form.vedioImg.length>0&&(this.hideUpload=!0),console.log(this.form.vedioImg,"vedioImg"),this.getBrandChildSelList((function(){o.brandChildSelList.forEach((function(t,i){e.result.brandChildList.forEach((function(e,i){t.brandChildUuid==e.brandChildUuid&&o.form.brandChildList.push(e.brandChildUuid)}))}))})),this.getClassifyChildSelList((function(){o.classifyChildSelList.forEach((function(t,i){e.result.classifyChildList.forEach((function(e,i){t.classifyChildUuid==e.classifyChildUuid&&o.form.classifyChildList.push(e.classifyChildUuid)}))}))})),this.form.video&&(this.videoFileList=[{name:"视频",url:this.form.video}]),r=this.uploadArrayFormat(this.form.vedioImg,"视频图片"),a=this.uploadArrayFormat(this.form.masterGraphList,"主图"),s=this.uploadArrayFormat(this.form.detailPictureList,"详图"),t.next=18,Promise.all([r,a,s]);case 18:this.fullscreenLoading=!1;case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=this;this.fullscreenLoading=!0,this.$refs.dataForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(i){var r,a,s,o,n,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=11;break}for(t.isSubmitFlag?(s=[],o=[]):(t.isSubmitFlag=!0,r=[],t.form.brandChildList.forEach((function(t,e){var i={};i.brandChildUuid=t,r.push(i)})),t.form.brandChildList=r,a=[],t.form.classifyChildList.forEach((function(t,e){var i={};i.classifyChildUuid=t,a.push(i)})),t.form.classifyChildList=a,s=t.form.masterGraphList.map((function(t){return t.url})),o=t.form.detailPictureList.map((function(t){return t.url}))),t.form.colorList.forEach((function(e,i){e.skuList.forEach((function(i,r){r>0&&i.salePrice!=e.skuList[r-1].salePrice&&(t.isNotSame=!0),parseFloat(i.salePrice)<10&&(t.isNotAllow=!0)}))})),n=0;n<t.form.colorList.length;n++)for(l=n+1;l<t.form.colorList.length;l++)t.form.colorList[n].color==t.form.colorList[l].color&&(t._isStop=!0);if(!t._isStop){e.next=10;break}return t.$message("您选择sku列表里存在重复的商品颜色，请去重后，重新提交。"),t.isNotAllow=!1,t.isLoaded=!1,t.fullscreenLoading=!1,e.abrupt("return");case 10:t.isNotAllow&&!t.isNotSame?t.$confirm("包含售价小于10元的sku, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.submitForm(s,o)})).catch((function(){t.isNotAllow=!1,t.isLoaded=!1})):t.isNotSame&&!t.isNotAllow?t.$confirm("sku\b售价不一致, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.submitForm(s,o)})).catch((function(){t.isNotSame=!1,t.isLoaded=!1})):t.isNotSame&&t.isNotAllow?t.$confirm("包含售价小于10元的sku, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$confirm("sku\b价格不同, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.submitForm(s,o)})).catch((function(){t.isNotSame=!1,t.isLoaded=!1}))})).catch((function(){t.isNotAllow=!1,t.isLoaded=!1})):t.submitForm(s,o);case 11:t.fullscreenLoading=!1;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},submitForm:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i){var r,a,o,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(this.form.vedioImg.length,"---------"),r=this.form.vedioImg.length>0?this.canEdit?this.form.vedioImg[0].url:this.form.vedioImg[0]:"",!this.canEdit){t.next=11;break}return this.form.productUuid=this.productUuid,t.next=6,Object(d["d"])(Object(s["a"])({},this.form,{masterGraphList:e,detailPictureList:i,vedioImg:r}));case 6:a=t.sent,console.log(a),1==a.rtn?(this.isSubmitFlag=!1,this.$message.success("修改成功"),this.onBack()):(this.isSubmitFlag=!1,this.resetForm((function(){n.getDetail()}))),t.next=16;break;case 11:return t.next=13,Object(d["b"])(Object(s["a"])({},this.form,{vedioImg:r}));case 13:o=t.sent,console.log(o),1==o.rtn?(this.isSubmitFlag=!1,this.resetForm(),this.$message.success("添加成功")):(this.isSubmitFlag=!1,this.resetForm((function(){n.getDetail()})));case 16:this.isLoaded=!1;case 17:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),getBrandSelList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["l"])({});case 2:e=t.sent,1==e.rtn&&(this.brandSelList=e.brandList,console.log(e,"res"));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleBrandChange:function(t){this.form.brandChildList=[],this.getBrandChildSelList()},getBrandChildSelList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.brandChildLoading=!0,this.form.brandChildList=[],!this.form.brandUuid){t.next=8;break}return t.next=5,Object(f["g"])({brandUuid:this.form.brandUuid});case 5:i=t.sent,1==i.rtn?(this.brandChildSelList=i.brandChildList,e&&e(),console.log(i,"res")):this.brandChildSelList=[],this.brandChildLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getClassifySelList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["m"])({});case 2:e=t.sent,1==e.rtn&&(this.classifySelList=e.classifyList,console.log(e,"res"));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleClassifyChange:function(t){this.form.classifyChildList=[],this.getClassifyChildSelList()},getClassifyChildSelList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.classifyChildLoading=!0,this.form.classifyChildList=[],!this.form.classifyUuid){t.next=8;break}return t.next=5,Object(m["f"])({classifyUuid:this.form.classifyUuid});case 5:i=t.sent,1==i.rtn?(this.classifyChildSelList=i.classifyChildList,e&&e(),console.log(i,"res")):this.classifyChildSelList=[],this.classifyChildLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onCancel:function(){this.canEdit?this.onBack():this.resetForm()},resetForm:function(t){this.$refs["dataForm"].clearValidate(),this.videoFileList=[],this.form={name:"",itemNumber:"",productStatus:1,suggestPrice:0,salePrice:0,weight:0,classifyUuid:"",brandUuid:"",brandChildList:[],classifyChildList:[],priceType:"",saleType:"",masterGraphList:[],video:"",vedioImg:[],detailPictureList:[],colorList:[{color:"",picture:"",skuList:[]}]},t&&t()},handleSkuImageSuccess:function(t,e,i){1==t.rtn&&(this.form.colorList[i].picture=t.url)},beforeSkuImageUpload:function(t){},beforeSkuRemove:function(t){return this.$confirm("确定移除 ".concat(t.name,"？"))},pictrueUploadSuccess:function(t,e){1==t.rtn&&(this.canEdit?this.form.masterGraphList.push({url:t.url}):this.form.masterGraphList.push(t.url))},beforePictureRemove:function(t){return this.$confirm("确定移除".concat(t.name||"该图片","？"))},beforeVedioImgRemove:function(t){return this.$confirm("确定移除".concat(t.name||"该图片","？"))},handleVedioImgRemove:function(t,e){if(this.hideUpload=e.length>=this.limitCount,this.canEdit){for(var i=t.url,r=0;r<this.form.vedioImg.length;r++)if(i===this.form.vedioImg[r].url)return void this.form.vedioImg.splice(r,1)}else for(var a=t.response.url,s=0;s<this.form.vedioImg.length;s++)if(a===this.form.vedioImg[s])return void this.form.vedioImg.splice(s,1)},handlePictureRemove:function(t,e){if(this.canEdit){for(var i=t.url,r=0;r<this.form.masterGraphList.length;r++)if(i===this.form.masterGraphList[r].url)return void this.form.masterGraphList.splice(r,1)}else for(var a=t.response.url,s=0;s<this.form.masterGraphList.length;s++)if(a===this.form.masterGraphList[s])return void this.form.masterGraphList.splice(s,1)},handleVideoPreview:function(t){},handleVideoRemove:function(t){t&&"success"===t.status&&(this.form.video="",this.videoFileList=[])},beforeVideoRemove:function(t){if(t&&"success"===t.status)return this.$confirm("确定移除".concat(t.name||"该视频","？"))},videoUploadSuccess:function(t){1==t.rtn&&(this.form.video=t.url,this.videoFileList=[{name:"视频",url:this.form.video}])},beforeDetailRemove:function(t){return this.$confirm("确定移除".concat(t.name||"该图片","？"))},detailUploadSuccess:function(t,e){1==t.rtn&&(this.canEdit?this.form.detailPictureList.push({url:t.url}):this.form.detailPictureList.push(t.url))},handleDetailRemove:function(t,e){if(this.canEdit){for(var i=t.url,r=0;r<this.form.detailPictureList.length;r++)if(i===this.form.detailPictureList[r].url)return void this.form.detailPictureList.splice(r,1)}else for(var a=t.response.url,s=0;s<this.form.detailPictureList.length;s++)if(a===this.form.detailPictureList[s])return void this.form.detailPictureList.splice(s,1)},deleteSku:function(t){var e=this.form.colorList;e.splice(t,1),this.form.colorList=e},addSku:function(){var t=this.form.colorList;t.length>0?(t.push(JSON.parse(JSON.stringify(t[t.length-1]))),this.canEdit&&t[t.length-1].skuList.forEach((function(t,e){t.isSysCode=!1,t.skuUuid&&delete t.skuUuid})),this.form.colorList=JSON.parse(JSON.stringify(t))):(t.push({color:"",picture:"",skuList:[]}),this.form.colorList=t)},addProductSku:function(t){if(0!=this.form.colorList[t].skuList.length){var e=this.form.colorList[t].skuList;e.push(e[e.length-1]),this.form.colorList[t].skuList=JSON.parse(JSON.stringify(e)),delete this.form.colorList[t].skuList[this.form.colorList[t].skuList.length-1].skuUuid,this.form.colorList[t].skuList[this.form.colorList[t].skuList.length-1].isSysCode=!1}else this.form.colorList[t].skuList.push({skuName:"",subTitle:"",salePrice:0,productNumber:1,stock:0,systemCode:""})},deleteProductSku:function(t,e){this.form.colorList[t].skuList.splice(e,1)},picUploadSuccess:function(t){1==t.rtn&&(this.canEdit?this.form.vedioImg.push({url:t.url}):this.form.vedioImg.push(t.url))},beforeUploadVideo:function(t){console.log(t,"file___");var e=t.size/1024/1024<10;return-1==["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb"].indexOf(t.type)?(this.$message.error("请上传正确的视频格式"),!1):e?void 0:(this.$message.error("上传视频大小不能超过10MB哦!"),!1)},uploadArrayFormat:function(t,e){return t.forEach((function(i,r){t[r]={name:"".concat(e).concat(r+1),url:i,uid:"uid_"+r+1}})),t},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},vedioImgChange:function(t,e){this.hideUpload=e.length>=this.limitCount},rowDrop:function(){var t=document.getElementById("crTable").querySelector(".el-upload-list--picture-card"),e=this;c.a.create(t,{onEnd:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(i){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=i.newIndex,a=i.oldIndex,console.log(e.form.masterGraphList,"masterGraphList"),console.log(r,a,"--------"),s=e.form.masterGraphList.splice(a,1)[0],console.log(s,e.form.masterGraphList,"======"),e.form.masterGraphList.splice(r,0,s),console.log(e.form.masterGraphList,"masterGraphList");case 7:case"end":return t.stop()}}),t)})));function i(e){return t.apply(this,arguments)}return i}()})},rowDrop_1:function(){var t=document.getElementById("crTable_1").querySelector(".el-upload-list--picture-card"),e=this;c.a.create(t,{onEnd:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(i){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=i.newIndex,a=i.oldIndex,console.log(e.form.detailPictureList,"masterGraphList"),console.log(r,a,"--------"),s=e.form.detailPictureList.splice(a,1)[0],console.log(s,e.form.detailPictureList,"======"),e.form.detailPictureList.splice(r,0,s),console.log(e.form.detailPictureList,"masterGraphList");case 7:case"end":return t.stop()}}),t)})));function i(e){return t.apply(this,arguments)}return i}()})},onBack:function(){this.$router.back(-1)}}}),b=p,g=(i("d50b"),i("0c43"),i("2877")),v=Object(g["a"])(b,r,a,!1,null,"88d97066",null);e["default"]=v.exports},"91b6":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("db72"),i("b775");var r=i("2b0e");var a="".concat(r["default"].prototype.BASE_URL,"upload/file")},"92bf":function(t,e,i){},"9add":function(t,e,i){"use strict";i("b775"),i("3be9")},c707:function(t,e,i){"use strict";i.d(e,"l",(function(){return a})),i.d(e,"j",(function(){return s})),i.d(e,"g",(function(){return o})),i.d(e,"f",(function(){return n})),i.d(e,"k",(function(){return l})),i.d(e,"t",(function(){return u})),i.d(e,"a",(function(){return c})),i.d(e,"i",(function(){return d})),i.d(e,"h",(function(){return f})),i.d(e,"u",(function(){return m})),i.d(e,"n",(function(){return h})),i.d(e,"m",(function(){return p})),i.d(e,"C",(function(){return b})),i.d(e,"B",(function(){return g})),i.d(e,"z",(function(){return v})),i.d(e,"A",(function(){return y})),i.d(e,"b",(function(){return L})),i.d(e,"c",(function(){return k})),i.d(e,"e",(function(){return C})),i.d(e,"d",(function(){return S})),i.d(e,"s",(function(){return O})),i.d(e,"r",(function(){return j})),i.d(e,"D",(function(){return x})),i.d(e,"E",(function(){return w})),i.d(e,"o",(function(){return _})),i.d(e,"q",(function(){return U})),i.d(e,"p",(function(){return P})),i.d(e,"v",(function(){return I})),i.d(e,"w",(function(){return E})),i.d(e,"x",(function(){return $})),i.d(e,"y",(function(){return N}));var r=i("ab3e");function a(t){return Object(r["a"])({url:"brand/selection/list",method:"post",data:t})}function s(t){return Object(r["a"])({url:"brand/list",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/brand/child/selection/list",method:"post",data:t})}function n(t){return Object(r["a"])({url:"brand/child/list",method:"post",data:t})}function l(t){return Object(r["a"])({url:"brand/navigation/list",method:"post",data:t})}function u(t){return Object(r["a"])({url:"brand/special/list",method:"post",data:t})}function c(t){return Object(r["a"])({url:"brand/add",method:"post",data:t})}function d(t){return Object(r["a"])({url:"brand/modify",method:"post",data:t})}function f(t){return Object(r["a"])({url:"brand/detail",method:"post",data:t})}function m(t){return Object(r["a"])({url:"brand/modify/status",method:"post",data:t})}function h(t){return Object(r["a"])({url:"brand/modify/settled",method:"post",data:t})}function p(t){return Object(r["a"])({url:"brand/modify/seq",method:"post",data:t})}function b(t){return Object(r["a"])({url:"brand/navigation/modify/status",method:"post",data:t})}function g(t){return Object(r["a"])({url:"brand/navigation/modify/seq",method:"post",data:t})}function v(t){return Object(r["a"])({url:"brand/navigation/add",method:"post",data:t})}function y(t){return Object(r["a"])({url:"brand/navigation/modify",method:"post",data:t})}function L(t){return Object(r["a"])({url:"brand/child/add",method:"post",data:t})}function k(t){return Object(r["a"])({url:"brand/child/modify",method:"post",data:t})}function C(t){return Object(r["a"])({url:"brand/child/modify/status",method:"post",data:t})}function S(t){return Object(r["a"])({url:"brand/child/modify/seq",method:"post",data:t})}function O(t){return Object(r["a"])({url:"brand/special/modify/status",method:"post",data:t})}function j(t){return Object(r["a"])({url:"brand/special/modify/seq",method:"post",data:t})}function x(t){return Object(r["a"])({url:"product/selection/list",method:"post",data:t})}function w(t){return Object(r["a"])({url:"brand/special/poster/selection/list",method:"post",data:t})}function _(t){return Object(r["a"])({url:"brand/special/add",method:"post",data:t})}function U(t){return Object(r["a"])({url:"brand/special/modify",method:"post",data:t})}function P(t){return Object(r["a"])({url:"brand/special/detail",method:"post",data:t})}function I(t){return Object(r["a"])({url:"/brand/remove",method:"post",data:t})}function E(t){return Object(r["a"])({url:"brand/child/remove",method:"post",data:t})}function $(t){return Object(r["a"])({url:"brand/navigation/remove",method:"post",data:t})}function N(t){return Object(r["a"])({url:"brand/special/remove",method:"post",data:t})}},c913:function(t,e,i){},d50b:function(t,e,i){"use strict";var r=i("c913"),a=i.n(r);a.a},ed8e:function(t,e,i){"use strict";i.d(e,"m",(function(){return a})),i.d(e,"f",(function(){return s})),i.d(e,"k",(function(){return o})),i.d(e,"e",(function(){return n})),i.d(e,"l",(function(){return l})),i.d(e,"b",(function(){return u})),i.d(e,"j",(function(){return c})),i.d(e,"i",(function(){return d})),i.d(e,"o",(function(){return f})),i.d(e,"n",(function(){return m})),i.d(e,"p",(function(){return h})),i.d(e,"a",(function(){return p})),i.d(e,"u",(function(){return b})),i.d(e,"t",(function(){return g})),i.d(e,"s",(function(){return v})),i.d(e,"r",(function(){return y})),i.d(e,"c",(function(){return L})),i.d(e,"d",(function(){return k})),i.d(e,"h",(function(){return C})),i.d(e,"g",(function(){return S})),i.d(e,"q",(function(){return O}));var r=i("ab3e");function a(t){return Object(r["a"])({url:"classify/selection/list",method:"post",data:t})}function s(t){return Object(r["a"])({url:"classify/child/selection/list",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/classify/list",method:"post",data:t})}function n(t){return Object(r["a"])({url:"classify/child/list",method:"post",data:t})}function l(t){return Object(r["a"])({url:"classify/navigation/list",method:"post",data:t})}function u(t){return Object(r["a"])({url:"classify/add",method:"post",data:t})}function c(t){return Object(r["a"])({url:"classify/modify",method:"post",data:t})}function d(t){return Object(r["a"])({url:"classify/detail",method:"post",data:t})}function f(t){return Object(r["a"])({url:"classify/modify/status",method:"post",data:t})}function m(t){return Object(r["a"])({url:"classify/modify/seq",method:"post",data:t})}function h(t){return Object(r["a"])({url:"classify/remove",method:"post",data:t})}function p(t){return Object(r["a"])({url:"/classify/navigation/add",method:"post",data:t})}function b(t){return Object(r["a"])({url:"/classify/navigation/modify",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/classify/navigation/modify/status",method:"post",data:t})}function v(t){return Object(r["a"])({url:"/classify/navigation/modify/seq",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/classify/navigation/remove",method:"post",data:t})}function L(t){return Object(r["a"])({url:"/classify/child/add",method:"post",data:t})}function k(t){return Object(r["a"])({url:"/classify/child/modify",method:"post",data:t})}function C(t){return Object(r["a"])({url:"classify/child/modify/status",method:"post",data:t})}function S(t){return Object(r["a"])({url:"classify/child/modify/seq",method:"post",data:t})}function O(t){return Object(r["a"])({url:"classify/child/remove",method:"post",data:t})}}}]);