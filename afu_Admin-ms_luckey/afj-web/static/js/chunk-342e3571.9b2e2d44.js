(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-342e3571"],{"52cf":function(t,e,r){"use strict";var n=r("a95a"),s=r.n(n);s.a},"5ac6":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"header"},[r("div",{staticClass:"clearfix headLab"},[t.canEdit?r("span",{staticStyle:{"font-size":"16px"}},[t._v("修改角色信息")]):t.isDtl?r("span",{staticStyle:{"font-size":"16px"}},[t._v("查看详情")]):r("span",{staticStyle:{"font-size":"16px"}},[t._v("新增角色信息")]),t._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"14px"},attrs:{type:"text"},on:{click:t.onBack}},[t._v("返回")])],1)]),t._v(" "),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",staticStyle:{width:"calc(100% - 600px)","margin-left":"240px"},attrs:{rules:t.rules,model:t.form,"label-position":"right","label-width":"120px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{attrs:{maxlength:16,disabled:t.isDtl},model:{value:t.form.roleName,callback:function(e){t.$set(t.form,"roleName",e)},expression:"form.roleName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容",disabled:t.isDtl},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:t.isDtl,placeholder:"状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusOptions,(function(t){return r("el-option",{key:t.key,attrs:{label:t.lab,value:t.value}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"权限树",prop:"permissionList"}},[r("el-tree",{ref:"tree",attrs:{data:t.permissionTree,"show-checkbox":"","node-key":"permissionId",props:t.defaultProps}})],1),t._v(" "),t.isDtl?t._e():r("el-form-item",{attrs:{align:"center"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",loading:t.isLoaded},on:{click:t.onSubmit}},[t._v("确定")]),t._v(" "),r("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)},s=[],i=(r("ac6a"),r("db72")),o=(r("96cf"),r("3b8d")),a=r("f9ac"),u=(r("e799"),{name:"SysAddUserManage",data:function(){return{loading:!1,isLoaded:!1,roleId:"",statusOptions:[{key:1,lab:"启用",value:1},{key:2,lab:"停用",value:2}],defaultProps:{children:"children",label:"permissionName"},roleListArr:[],roleListCheckOptions:[],permissionTree:[],type:"",canEdit:"",isDtl:!1,userId:"",form:{roleName:"",permissionList:[],description:"",status:""},rules:{roleName:[{required:!0,message:"必填项",trigger:"blur"}],permissionList:[{required:!0,type:"array",message:"必填项",trigger:"blur"}],description:[{required:!0,message:"必填项",trigger:"blur"}],status:[{required:!0,message:"必填项",trigger:"blur"}]}}},created:function(){this.getPermissionTree()},mounted:function(){this.roleId=this.$route.query.roleId,this.beforeRouter=this.$route.query.beforeRouter,console.log(this.$route.query.canEdit,"==="),this.$route.query.canEdit&&(this.canEdit=JSON.parse(this.$route.query.canEdit)),this.$route.query.isDtl&&(this.isDtl=JSON.parse(this.$route.query.isDtl)),this.canEdit?(console.log("canEdit"),this.type="update",document.title="修改角色",this.$route.meta.title="修改角色"):this.isDtl?(this.type="check",document.title="查看详情",this.$route.meta.title="查看详情"):(this.type="add",document.title="新增角色",this.$route.meta.title="新增角色"),"update"!==this.type&&"check"!==this.type||this.getDetail()},methods:{getPermissionTree:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["t"])({});case 2:e=t.sent,console.log(e),1==e.rtn&&(this.permissionTree=e.permissionTree);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDetail:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,n,s,i,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(a["s"])({roleId:this.roleId});case 3:e=t.sent,1==e.rtn&&(r=e.result,n=[],s=r.roleName,i=r.description,o=r.status,u=r.permissionTree,this.permissionTreeCount(u,n),this.form={roleName:s,description:i,status:o,permissionList:n,roleId:this.roleId},this.setDefaultChecked(n)),this.loading=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=this;this.form.permissionList=this.$refs.tree.getCheckedKeys(),this.$refs.tree.getHalfCheckedKeys()&&this.$refs.tree.getHalfCheckedKeys().length>0&&(this.form.permissionList=this.form.permissionList.concat(this.$refs.tree.getHalfCheckedKeys())),this.$refs.dataForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=15;break}if(t.form.permissionList=t.form.permissionList.map((function(t){return{permissionId:t}})),t.isLoaded=!0,"add"!==t.type){e.next=11;break}return e.next=6,Object(a["a"])(Object(i["a"])({},t.form));case 6:n=e.sent,1==n.rtn&&(t.$message.success("创建成功"),t.resetForm()),t.isLoaded=!1,e.next=15;break;case 11:return e.next=13,Object(a["e"])(Object(i["a"])({},t.form));case 13:s=e.sent,1==s.rtn&&(t.$message.success("修改成功"),t.$router.push({name:"SysRoleManage"}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){"add"===this.type?this.resetForm():this.$router.push({name:"SysRoleManage"})},resetForm:function(){this.$refs.dataForm.resetFields(),this.form={roleName:"",permissionList:[],description:""},this.setDefaultChecked([])},setDefaultChecked:function(t){var e=this;this.$nextTick((function(){e.$refs.tree.setCheckedKeys(t)}))},permissionTreeCount:function(t,e){t.forEach((function(t,r){t.children.forEach((function(t,r){t.children.forEach((function(t,r){1==t.selected&&e.push(t.permissionId)}))}))}))},onBack:function(){this.$router.back(-1)}}}),c=u,d=(r("52cf"),r("2877")),l=Object(d["a"])(c,n,s,!1,null,"e5e07d94",null);e["default"]=l.exports},a95a:function(t,e,r){},e799:function(t,e,r){"use strict";r("6762"),r("2fdb"),r("4360")},f9ac:function(t,e,r){"use strict";r.d(e,"u",(function(){return s})),r.d(e,"r",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"v",(function(){return a})),r.d(e,"f",(function(){return u})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return d})),r.d(e,"s",(function(){return l})),r.d(e,"t",(function(){return f})),r.d(e,"a",(function(){return m})),r.d(e,"e",(function(){return p})),r.d(e,"n",(function(){return h})),r.d(e,"k",(function(){return b})),r.d(e,"o",(function(){return y})),r.d(e,"m",(function(){return g})),r.d(e,"l",(function(){return v})),r.d(e,"i",(function(){return O})),r.d(e,"g",(function(){return k})),r.d(e,"j",(function(){return j})),r.d(e,"h",(function(){return x})),r.d(e,"q",(function(){return $})),r.d(e,"p",(function(){return w})),r.d(e,"y",(function(){return L})),r.d(e,"w",(function(){return _})),r.d(e,"x",(function(){return C}));var n=r("ab3e");function s(t){return Object(n["a"])({url:"/sys/user/list",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/sys/role/list",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/sys/user/add",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/sys/user/detail",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/sys/user/modify",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/sys/user/restPassword",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/sys/role/remove",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/sys/role/detail",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/sys/role/permission/tree",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/sys/role/add",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/sys/role/modify",method:"post",data:t})}function h(t){return Object(n["a"])({url:"member/list",method:"post",data:t})}function b(t){return Object(n["a"])({url:"member/add",method:"post",data:t})}function y(t){return Object(n["a"])({url:"member/modify/status",method:"post",data:t})}function g(t){return Object(n["a"])({url:"member/detail",method:"post",data:t})}function v(t){return Object(n["a"])({url:"member/remove",method:"post",data:t})}function O(t){return Object(n["a"])({url:"freight/list",method:"post",data:t})}function k(t){return Object(n["a"])({url:"freight/add",method:"post",data:t})}function j(t){return Object(n["a"])({url:"freight/modify/status",method:"post",data:t})}function x(t){return Object(n["a"])({url:"freight/remove",method:"post",data:t})}function $(t){return Object(n["a"])({url:"/freight/provinceList",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/member/merchantList",method:"post",data:t})}function L(t){return Object(n["a"])({url:"/sys/app/version/list",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/sys/app/version/add",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/sys/app/version/modify",method:"post",data:t})}}}]);