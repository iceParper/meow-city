(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05dec034"],{"0fe5":function(e,t,r){"use strict";var a=r("80e7"),n=r.n(a);n.a},"3e1b":function(e,t,r){},"617c":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"w",(function(){return s})),r.d(t,"t",(function(){return o})),r.d(t,"u",(function(){return u})),r.d(t,"v",(function(){return c})),r.d(t,"r",(function(){return d})),r.d(t,"x",(function(){return l})),r.d(t,"a",(function(){return m})),r.d(t,"y",(function(){return f})),r.d(t,"z",(function(){return h})),r.d(t,"d",(function(){return p})),r.d(t,"s",(function(){return b})),r.d(t,"o",(function(){return v})),r.d(t,"i",(function(){return g})),r.d(t,"f",(function(){return y})),r.d(t,"k",(function(){return x})),r.d(t,"j",(function(){return L})),r.d(t,"e",(function(){return k})),r.d(t,"m",(function(){return w})),r.d(t,"n",(function(){return O})),r.d(t,"l",(function(){return _})),r.d(t,"g",(function(){return N})),r.d(t,"h",(function(){return j})),r.d(t,"q",(function(){return S})),r.d(t,"p",(function(){return $}));var a=r("ab3e");function n(e){return Object(a["a"])({url:"/merchant/apply/list",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/merchant/apply/audit",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/merchant/list",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/merchant/detail",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/merchant/modify",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/merchant/modify/status",method:"post",data:e})}function d(e){return Object(a["a"])({method:"post",url:"/merchant/modify/member",data:e})}function l(e){return Object(a["a"])({method:"post",url:"merchant/modify/expiry",data:e})}function m(e){return Object(a["a"])({method:"post",url:"merchant/user/add",data:e})}function f(e){return Object(a["a"])({url:"merchant/user/remove",method:"post",data:e})}function h(e){return Object(a["a"])({method:"post",url:"merchant/user/modify",data:e})}function p(e){return Object(a["a"])({method:"post",url:"brand/selection/list",data:e})}function b(e){return Object(a["a"])({method:"post",url:"member/selection/list",data:e})}function v(e){return Object(a["a"])({method:"post",url:"cusmanager/selection/list",data:e})}function g(e){return Object(a["a"])({method:"post",url:"merchant/credit/apply/list",data:e})}function y(e){return Object(a["a"])({method:"post",url:"merchant/credit/apply/audit",data:e})}function x(e){return Object(a["a"])({url:"/order/credit/list",method:"post",data:e})}function L(e){return Object(a["a"])({url:"/order/credit/detail",method:"post",data:e})}function k(e){return Object(a["a"])({url:"/order/credit/contract/"+e,method:"get",data:{}})}function w(e){return Object(a["a"])({url:"/order/credit/audit",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/order/modify/creditOrder",method:"post",data:e})}function _(e){return Object(a["a"])({url:"merchant/credit/merchant/list",method:"post",data:e})}function N(e){return Object(a["a"])({url:"/merchant/credit/detail",method:"post",data:e})}function j(e){return Object(a["a"])({url:"/merchant/credit/modify",method:"post",data:e})}function S(e){return Object(a["a"])({url:"/merchant/modify/brand",method:"post",data:e})}function $(e){return Object(a["a"])({method:"post",header:{"Content-Type":"application/xls"},responseType:"blob",url:"/order/credit/export",data:e})}},"80e7":function(e,t,r){},"91b6":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("db72"),r("b775");var a=r("2b0e");var n="".concat(a["default"].prototype.BASE_URL,"upload/file")},cc73:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"header"},[r("div",{staticClass:"clearfix headLab"},[r("span",{staticStyle:{"font-size":"16px"}},[e._v("商户申请审核")]),e._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"14px"},attrs:{type:"text"},on:{click:e.onBack}},[e._v("返回")])],1)]),e._v(" "),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataForm",staticStyle:{width:"calc(100% - 600px)","margin-left":"240px"},attrs:{rules:e.rules,model:e.form,"label-position":"right","label-width":"120px"}},[r("el-form-item",{attrs:{label:"审核状态",prop:"auditStatus"}},[r("el-switch",{staticStyle:{padding:"6px"},attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-value":"2","inactive-value":"1","active-text":"未通过审核","inactive-text":"通过审核"},on:{change:e._switch},model:{value:e.switchVal,callback:function(t){e.switchVal=t},expression:"switchVal"}})],1),e._v(" "),e.isSure?r("div",[r("el-form-item",{attrs:{label:"商户编号",prop:"merchantNumber"}},[r("el-input",{attrs:{maxlength:16},model:{value:e.form.merchantNumber,callback:function(t){e.$set(e.form,"merchantNumber",t)},expression:"form.merchantNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"店铺名称",prop:"shopName"}},[r("el-input",{attrs:{maxlength:16},model:{value:e.form.shopName,callback:function(t){e.$set(e.form,"shopName",t)},expression:"form.shopName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"主营业务",prop:"mainBusiness"}},[r("el-input",{attrs:{maxlength:16},model:{value:e.form.mainBusiness,callback:function(t){e.$set(e.form,"mainBusiness",t)},expression:"form.mainBusiness"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{staticClass:"avatar-uploader hide",attrs:{headers:e.headers,action:e.uploadUrl,"file-list":e.businessLicense,"list-type":"picture-card","auto-upload":!1},scopedSlots:e._u([{key:"file",fn:function(t){var a=t.file;return r("div",{},[r("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),e._v(" "),r("span",{staticClass:"el-upload-list__item-actions"},[r("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(a)}}},[r("i",{staticClass:"el-icon-zoom-in"})])])])}}],null,!1,2786152224)},[r("i",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{slot:"default"},slot:"default"})])],1),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),r("el-form-item",{attrs:{label:"有效期至",prop:"expiryDate"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间","picker-options":e.pickerOptions},model:{value:e.form.expiryDate,callback:function(t){e.$set(e.form,"expiryDate",t)},expression:"form.expiryDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"店主姓名",prop:"merchantName"}},[r("el-input",{attrs:{maxlength:16},model:{value:e.form.merchantName,callback:function(t){e.$set(e.form,"merchantName",t)},expression:"form.merchantName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"店铺地址",prop:"address"}},[r("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[r("el-input",{attrs:{disabled:!0,maxlength:16},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"微信号",prop:"wechat"}},[r("el-input",{attrs:{maxlength:16},model:{value:e.form.wechat,callback:function(t){e.$set(e.form,"wechat",t)},expression:"form.wechat"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"客户经理",prop:"accountManagerUuid"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"客户经理"},model:{value:e.form.accountManagerUuid,callback:function(t){e.$set(e.form,"accountManagerUuid",t)},expression:"form.accountManagerUuid"}},e._l(e.cusManagerList,(function(e){return r("el-option",{key:e.customerServiceUuid,attrs:{label:e.name,value:e.customerServiceUuid}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"会员"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"会员"},model:{value:e.form.memberUuid,callback:function(t){e.$set(e.form,"memberUuid",t)},expression:"form.memberUuid"}},e._l(e.memberList,(function(e){return r("el-option",{key:e.memberUuid,attrs:{label:e.lever,value:e.memberUuid}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"品牌",prop:"brandList"}},[r("el-checkbox-group",{model:{value:e.form.brandList,callback:function(t){e.$set(e.form,"brandList",t)},expression:"form.brandList"}},e._l(e.brandList,(function(t){return r("el-checkbox",{key:t.brandUuid,attrs:{label:t.brandUuid}},[e._v(e._s(t.brandName))])})),1)],1),e._v(" "),r("el-form-item",{attrs:{align:"center"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",loading:e.isLoaded},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1):r("div",[r("el-form-item",{attrs:{label:"描述",prop:"auditReason"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.form.auditReason,callback:function(t){e.$set(e.form,"auditReason",t)},expression:"form.auditReason"}})],1),e._v(" "),r("el-form-item",{attrs:{align:"center"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",loading:e.isLoaded},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)],1)},n=[],i=r("db72"),s=(r("96cf"),r("3b8d")),o=(r("ac6a"),r("617c")),u=r("91b6"),c=(r("e799"),r("ed08"),r("5f87")),d={name:"ApllyMerchantManage",data:function(){return{headers:{},dialogImageUrl:"",dialogVisible:!1,loading:!1,isLoaded:!1,isSure:!0,applyId:"",uploadUrl:u["a"],token:"",userId:"",switchVal:!0,businessLicense:[],merchantName:"",address:"",phone:"",brandList:[],cusManagerList:[],memberList:[],form:{applyId:void 0,auditStatus:1,merchantNumber:void 0,shopName:void 0,mainBusiness:void 0,address:void 0,phone:void 0,wechat:void 0,expiryDate:void 0,accountManagerUuid:void 0,memberUuid:void 0,brandList:[],businessLicense:void 0,auditReason:void 0,merchantName:void 0},rules:{expiryDate:[{required:!0,message:"必填项",trigger:"change"}],merchantNumber:[{required:!0,message:"必填项",trigger:"blur"}],brandList:[{required:!0,type:"array",message:"必填项",trigger:"blur"}],shopName:[{required:!0,message:"必填项",trigger:"blur"}],merchantName:[{required:!0,message:"必填项",trigger:"blur"}],address:[{required:!0,message:"必填项",trigger:"blur"}],phone:[{required:!0,message:"必填项",trigger:"blur"}],accountManagerUuid:[{required:!0,message:"必填项",trigger:"change"}],auditReason:[{required:!0,message:"必填项",trigger:"blur"}]},pickerOptions:{shortcuts:[{text:"5天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+432e6),e.$emit("pick",t)}},{text:"10天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e6),e.$emit("pick",t)}},{text:"30天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+2592e6),e.$emit("pick",t)}},{text:"长期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+31536e8),e.$emit("pick",t)}}]}}},created:function(){this.getBrandList(),this.getMemberList(),this.getCusmanagerList(),this.token=Object(c["a"])(),this.userId=Object(c["b"])(),this.headers={_t:this.token,_u:this.userId,"Content-Type":"application/json;charset=UTF-8"},console.log(this.token,this.userId,this.headers)},mounted:function(){if(this.applyId=this.$route.query.applyId,this.$route.query.businessLicense){this.businessLicense=JSON.parse(this.$route.query.businessLicense);var e=[];this.businessLicense.forEach((function(t,r){var a={};a.name="name_"+r,a.url=t,e.push(a)})),this.businessLicense=e}this.merchantName=this.$route.query.merchantName,this.address=this.$route.query.address,this.phone=this.$route.query.phone,this.form.applyId=this.applyId,this.form.merchantName=this.merchantName,this.form.address=this.address,this.form.phone=this.phone,this.beforeRouter=this.$route.query.beforeRouter},computed:{},methods:{onSubmit:function(){var e=this;if(this.form.brandList&&this.form.brandList.length>0){var t=[];this.form.brandList.forEach((function(e,r){var a={};a.brandUuid=e,t.push(a)})),this.form.brandList=t}var r=[];this.businessLicense.forEach((function(e,t){r.push(e.url)})),this.$refs.dataForm.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}return e.isLoaded=!0,1==e.form.auditStatus?(e.form.businessLicense=JSON.stringify(r),e.form.brandList=JSON.stringify(e.form.brandList),e.form.merchantName=e.merchantName,e.form.address=e.address,e.form.phone=e.phone):(delete e.form.businessLicense,delete e.form.expiryDate,delete e.form.brandList,delete e.form.merchantName,delete e.form.address,delete e.form.phone),t.next=5,Object(o["c"])(Object(i["a"])({},e.form));case 5:n=t.sent,1==n.rtn?(1==e.form.auditStatus?e.onCancel():e.form.auditReason=void 0,e.$message.success("审核提交成功"),e.onBack()):1==e.form.auditStatus&&(e.form.brandList=JSON.parse(e.form.brandList),s=[],e.form.brandList.forEach((function(e,t){s.push(e.brandUuid)})),e.form.brandList=s,console.log(e.form.brandList,"brandList")),e.isLoaded=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},onCancel:function(){this.resetForm()},resetForm:function(){void 0!==this.$refs["dataForm"]&&this.$refs.dataForm.clearValidate();var e=[];this.businessLicense.forEach((function(t,r){e.push(t.url)})),this.form={applyId:this.applyId,auditStatus:1,merchantNumber:void 0,shopName:void 0,mainBusiness:void 0,address:this.address,phone:this.phone,wechat:void 0,expiryDate:void 0,accountManagerUuid:void 0,memberUuid:void 0,brandList:[],businessLicense:JSON.stringify(e),auditReason:void 0,merchantName:this.merchantName}},getBrandList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["d"])({});case 2:t=e.sent,1==t.rtn&&(this.brandList=t.brandList);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMemberList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["s"])({});case 2:t=e.sent,1==t.rtn&&(this.memberList=t.memberList);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCusmanagerList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["o"])({});case 2:t=e.sent,1==t.rtn&&(this.cusManagerList=t.cusManageList);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onBack:function(){this.$router.back(-1)},_switch:function(e){this.isSure=!this.isSure,console.log(this.$refs.dataForm,"dataForm"),void 0!==this.$refs["dataForm"]&&this.$refs.dataForm.clearValidate();var t=[];this.businessLicense.forEach((function(e,r){t.push(e.url)})),this.form={applyId:this.applyId,auditStatus:e,merchantNumber:void 0,shopName:void 0,mainBusiness:void 0,address:this.address,phone:this.phone,wechat:void 0,expiryDate:void 0,accountManagerUuid:void 0,memberUuid:void 0,brandList:[],businessLicense:JSON.stringify(t),auditReason:void 0,merchantName:this.merchantName}},handleRemove:function(e){console.log(e),this.businessLicense.splice(e,1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload:function(e){console.log(e)}}},l=d,m=(r("cd66"),r("0fe5"),r("2877")),f=Object(m["a"])(l,a,n,!1,null,"78b17655",null);t["default"]=f.exports},cd66:function(e,t,r){"use strict";var a=r("3e1b"),n=r.n(a);n.a},e799:function(e,t,r){"use strict";r("6762"),r("2fdb"),r("4360")}}]);