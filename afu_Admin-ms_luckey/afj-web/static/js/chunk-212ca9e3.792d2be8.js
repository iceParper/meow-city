(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-212ca9e3"],{"0fa6":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"header"},[r("div",{staticClass:"clearfix headLab"},[r("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.title))]),t._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0","font-size":"14px"},attrs:{type:"text"},on:{click:t.onBack}},[t._v("返回")])],1)]),t._v(" "),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dataForm",staticStyle:{width:"calc(100% - 600px)","margin-left":"240px"},attrs:{model:t.form,"label-position":"right","label-width":"120px",rules:t.rules}},[r("el-form-item",{attrs:{label:"会员级别",prop:"lever"}},[r("el-input",{attrs:{placeholder:"会员名称",maxlength:16},model:{value:t.form.lever,callback:function(e){t.$set(t.form,"lever",e)},expression:"form.lever"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"会员描述",prop:"memberDesc"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"会员描述",maxlength:16},model:{value:t.form.memberDesc,callback:function(e){t.$set(t.form,"memberDesc",e)},expression:"form.memberDesc"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"全局应用",prop:"applyAll"}},[r("el-switch",{on:{change:t._getAllpyAllVal},model:{value:t.form.applyAll,callback:function(e){t.$set(t.form,"applyAll",e)},expression:"form.applyAll"}})],1),t._v(" "),t.form.applyAll?r("el-form-item",{attrs:{label:"折扣规则",required:!0}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"折扣"},model:{value:t.form.globalDiscount,callback:function(e){t.$set(t.form,"globalDiscount",e)},expression:"form.globalDiscount"}})],1):r("el-form-item",{attrs:{label:"折扣规则",required:!0}},[t._l(t.form.ruleList,(function(e,n){return r("div",{key:n},[r("el-form-item",[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"折扣"},model:{value:e.discount,callback:function(r){t.$set(e,"discount",r)},expression:"rule.discount"}}),t._v(" "),t.form.ruleList.length>1?r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteRuleClick(n)}}},[t._v("删除规则")]):t._e(),t._v(" "),r("br")],1),t._v(" "),r("el-form-item",[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"品牌"},model:{value:e.brandUuid,callback:function(r){t.$set(e,"brandUuid",r)},expression:"rule.brandUuid"}},t._l(t.brandSelList,(function(t){return r("el-option",{key:t.brandUuid,attrs:{label:t.brandName,value:t.brandUuid}})})),1)],1),t._v(" "),r("el-form-item",[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"价格类型"},model:{value:e.priceType,callback:function(r){t.$set(e,"priceType",r)},expression:"rule.priceType"}},t._l(t.dataOptions,(function(t){return r("el-option",{key:t.id,attrs:{label:t.lab,value:t.val}})})),1)],1)],1)})),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.addRuleClick}},[t._v("新增规则")])],2),t._v(" "),r("el-form-item",{attrs:{label:"状态",prop:"isActive"}},[r("el-switch",{model:{value:t.form.isActive,callback:function(e){t.$set(t.form,"isActive",e)},expression:"form.isActive"}})],1),t._v(" "),r("el-form-item",{attrs:{align:"center"}},[r("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定")]),t._v(" "),r("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)},a=[],o=r("db72"),i=(r("96cf"),r("3b8d")),u=r("f9ac"),c=r("c707"),s=(r("5c96"),{name:"SysMemberAddManage",data:function(){return{listLoading:!1,title:"新建会员",brandSelList:[],dataOptions:[{id:0,lab:"全部",val:3},{id:1,lab:"正价",val:1},{id:2,lab:"特价",val:2}],form:{lever:"",memberDesc:"",globalDiscount:void 0,applyAll:!1,isActive:!1,ruleList:[{discount:"",brandUuid:"",priceType:""}]},rules:{lever:[{required:!0,message:"必填项",trigger:"blur"}],memberDesc:[{required:!0,message:"必填项",trigger:"blur"}],globalDiscount:[{required:!0,message:"必填项",trigger:"blur"}],applyAll:[{required:!0,message:"必填项",trigger:"blur"}],isActive:[{required:!0,message:"必填项",trigger:"blur"}]}}},mounted:function(){this.getBrandList()},methods:{getBrandList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["l"])({});case 2:r=t.sent,1==r.rtn&&(this.brandSelList=r.brandList);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onCancel:function(){this.resetForm()},onBack:function(){this.$router.back(-1)},onSubmit:function(){var t=this,e=Object(o["a"])({},this.form);e.applyAll=this.form.applyAll?0:1,e.isActive=this.form.isActive?0:1,this.$refs.dataForm.validate(function(){var r=Object(i["a"])(regeneratorRuntime.mark((function r(n){var a,i,c,s,d,l,f,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n){r.next=47;break}if(a=t.form.ruleList,1!=t.applyAll){r.next=21;break}if(i=a.every((function(t){return""!=t.discount})),c=a.every((function(t){return""!=t.brandUuid})),s=a.every((function(t){return""!=t.priceType})),i){r.next=11;break}return t.$message.error("折扣不能为空"),r.abrupt("return",!1);case 11:if(c){r.next=16;break}return t.$message.error("品牌不能为空"),r.abrupt("return",!1);case 16:if(s){r.next=19;break}return t.$message.error("价格类型不能为空"),r.abrupt("return",!1);case 19:r.next=41;break;case 21:d=!1,t.form.globalDiscount=void 0,l=0;case 24:if(!(l<a.length)){r.next=39;break}f=l+1;case 26:if(!(f<a.length)){r.next=34;break}if(a[l].brandUuid!=a[f].brandUuid||a[l].priceType!=a[f].priceType){r.next=31;break}return d=!0,t.$message.warning("同一品牌,价格类型相同"),r.abrupt("break",34);case 31:f++,r.next=26;break;case 34:if(!d){r.next=36;break}return r.abrupt("break",39);case 36:l++,r.next=24;break;case 39:if(!d){r.next=41;break}return r.abrupt("return",!1);case 41:return t.listLoading=!0,r.next=44,Object(u["k"])(Object(o["a"])({},e));case 44:m=r.sent,1==m.rtn&&(t.$message.success("创建成功!"),t.resetForm()),t.listLoading=!1;case 47:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},resetForm:function(){this.$refs["dataForm"].clearValidate(),this.form={lever:"",memberDesc:"",globalDiscount:"",applyAll:!1,isActive:!1,ruleList:[{discount:"",brandUuid:"",priceType:""}]}},addRuleClick:function(){this.form.ruleList.push({discount:"",priceType:"",brandUuid:""})},deleteRuleClick:function(t){this.form.ruleList.length<=1||this.form.ruleList.splice(t,1)},_getAllpyAllVal:function(t){t?(this.form.ruleList=void 0,this.form.globalDiscount=""):(this.form.globalDiscount=void 0,this.form.ruleList=[{discount:"",priceType:"",brandUuid:""}])}}}),d=s,l=(r("f690"),r("2877")),f=Object(l["a"])(d,n,a,!1,null,"7bfe19b0",null);e["default"]=f.exports},c707:function(t,e,r){"use strict";r.d(e,"l",(function(){return a})),r.d(e,"j",(function(){return o})),r.d(e,"g",(function(){return i})),r.d(e,"f",(function(){return u})),r.d(e,"k",(function(){return c})),r.d(e,"t",(function(){return s})),r.d(e,"a",(function(){return d})),r.d(e,"i",(function(){return l})),r.d(e,"h",(function(){return f})),r.d(e,"u",(function(){return m})),r.d(e,"n",(function(){return b})),r.d(e,"m",(function(){return p})),r.d(e,"C",(function(){return h})),r.d(e,"B",(function(){return v})),r.d(e,"z",(function(){return y})),r.d(e,"A",(function(){return g})),r.d(e,"b",(function(){return j})),r.d(e,"c",(function(){return O})),r.d(e,"e",(function(){return k})),r.d(e,"d",(function(){return x})),r.d(e,"s",(function(){return _})),r.d(e,"r",(function(){return w})),r.d(e,"D",(function(){return A})),r.d(e,"E",(function(){return L})),r.d(e,"o",(function(){return D})),r.d(e,"q",(function(){return $})),r.d(e,"p",(function(){return S})),r.d(e,"v",(function(){return q})),r.d(e,"w",(function(){return U})),r.d(e,"x",(function(){return C})),r.d(e,"y",(function(){return T}));var n=r("ab3e");function a(t){return Object(n["a"])({url:"brand/selection/list",method:"post",data:t})}function o(t){return Object(n["a"])({url:"brand/list",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/brand/child/selection/list",method:"post",data:t})}function u(t){return Object(n["a"])({url:"brand/child/list",method:"post",data:t})}function c(t){return Object(n["a"])({url:"brand/navigation/list",method:"post",data:t})}function s(t){return Object(n["a"])({url:"brand/special/list",method:"post",data:t})}function d(t){return Object(n["a"])({url:"brand/add",method:"post",data:t})}function l(t){return Object(n["a"])({url:"brand/modify",method:"post",data:t})}function f(t){return Object(n["a"])({url:"brand/detail",method:"post",data:t})}function m(t){return Object(n["a"])({url:"brand/modify/status",method:"post",data:t})}function b(t){return Object(n["a"])({url:"brand/modify/settled",method:"post",data:t})}function p(t){return Object(n["a"])({url:"brand/modify/seq",method:"post",data:t})}function h(t){return Object(n["a"])({url:"brand/navigation/modify/status",method:"post",data:t})}function v(t){return Object(n["a"])({url:"brand/navigation/modify/seq",method:"post",data:t})}function y(t){return Object(n["a"])({url:"brand/navigation/add",method:"post",data:t})}function g(t){return Object(n["a"])({url:"brand/navigation/modify",method:"post",data:t})}function j(t){return Object(n["a"])({url:"brand/child/add",method:"post",data:t})}function O(t){return Object(n["a"])({url:"brand/child/modify",method:"post",data:t})}function k(t){return Object(n["a"])({url:"brand/child/modify/status",method:"post",data:t})}function x(t){return Object(n["a"])({url:"brand/child/modify/seq",method:"post",data:t})}function _(t){return Object(n["a"])({url:"brand/special/modify/status",method:"post",data:t})}function w(t){return Object(n["a"])({url:"brand/special/modify/seq",method:"post",data:t})}function A(t){return Object(n["a"])({url:"product/selection/list",method:"post",data:t})}function L(t){return Object(n["a"])({url:"brand/special/poster/selection/list",method:"post",data:t})}function D(t){return Object(n["a"])({url:"brand/special/add",method:"post",data:t})}function $(t){return Object(n["a"])({url:"brand/special/modify",method:"post",data:t})}function S(t){return Object(n["a"])({url:"brand/special/detail",method:"post",data:t})}function q(t){return Object(n["a"])({url:"/brand/remove",method:"post",data:t})}function U(t){return Object(n["a"])({url:"brand/child/remove",method:"post",data:t})}function C(t){return Object(n["a"])({url:"brand/navigation/remove",method:"post",data:t})}function T(t){return Object(n["a"])({url:"brand/special/remove",method:"post",data:t})}},cc06:function(t,e,r){},f690:function(t,e,r){"use strict";var n=r("cc06"),a=r.n(n);a.a},f9ac:function(t,e,r){"use strict";r.d(e,"u",(function(){return a})),r.d(e,"r",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"v",(function(){return u})),r.d(e,"f",(function(){return c})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return d})),r.d(e,"s",(function(){return l})),r.d(e,"t",(function(){return f})),r.d(e,"a",(function(){return m})),r.d(e,"e",(function(){return b})),r.d(e,"n",(function(){return p})),r.d(e,"k",(function(){return h})),r.d(e,"o",(function(){return v})),r.d(e,"m",(function(){return y})),r.d(e,"l",(function(){return g})),r.d(e,"i",(function(){return j})),r.d(e,"g",(function(){return O})),r.d(e,"j",(function(){return k})),r.d(e,"h",(function(){return x})),r.d(e,"q",(function(){return _})),r.d(e,"p",(function(){return w})),r.d(e,"y",(function(){return A})),r.d(e,"w",(function(){return L})),r.d(e,"x",(function(){return D}));var n=r("ab3e");function a(t){return Object(n["a"])({url:"/sys/user/list",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/sys/role/list",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/sys/user/add",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/sys/user/detail",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/sys/user/modify",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/sys/user/restPassword",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/sys/role/remove",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/sys/role/detail",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/sys/role/permission/tree",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/sys/role/add",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/sys/role/modify",method:"post",data:t})}function p(t){return Object(n["a"])({url:"member/list",method:"post",data:t})}function h(t){return Object(n["a"])({url:"member/add",method:"post",data:t})}function v(t){return Object(n["a"])({url:"member/modify/status",method:"post",data:t})}function y(t){return Object(n["a"])({url:"member/detail",method:"post",data:t})}function g(t){return Object(n["a"])({url:"member/remove",method:"post",data:t})}function j(t){return Object(n["a"])({url:"freight/list",method:"post",data:t})}function O(t){return Object(n["a"])({url:"freight/add",method:"post",data:t})}function k(t){return Object(n["a"])({url:"freight/modify/status",method:"post",data:t})}function x(t){return Object(n["a"])({url:"freight/remove",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/freight/provinceList",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/member/merchantList",method:"post",data:t})}function A(t){return Object(n["a"])({url:"/sys/app/version/list",method:"post",data:t})}function L(t){return Object(n["a"])({url:"/sys/app/version/add",method:"post",data:t})}function D(t){return Object(n["a"])({url:"/sys/app/version/modify",method:"post",data:t})}}}]);